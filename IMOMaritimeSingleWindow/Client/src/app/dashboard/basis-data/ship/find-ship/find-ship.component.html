<div class="card card-ssn text-center">
  <div class="card-header bg-ssn text-ssn">
    <div class="row">
      <div class="col-2">
        <img src="assets/images/VoyageIcons/128x128/white/ship.png" height="32px" />
      </div>
      <div class="col-8">
        <h4>Select Ship</h4>
      </div>
    </div>
  </div>
  <div class="card-body">

    <ng-template #rt let-r="result" let-t="term">
      <div class="">
        <img src="assets/images/Flags/{{r.twoCharCode}}.png" height="16px" />
        <strong *ngIf="r.shipName">Name: </strong> {{ r.shipName }}
        <strong *ngIf="r.callSign"> Call sign: </strong> {{ r.callSign }}
        <strong *ngIf="r.imoNo"> IMO number: </strong> {{ r.imoNo }}
        <strong *ngIf="r.mmsiNo"> MMSI number: </strong> {{ r.mmsiNo }}
      </div>
    </ng-template>

    <div *ngIf="!shipFound">
      <label for="find-ship">Search using ship name, call sign, IMO number or MMSI number</label>
      <div class="row">
        <div class="col-2"></div>
        <div class="col-8">
          <input id="find-ship" type="text" class="form-control mx-auto" [(ngModel)]="shipModel" [ngbTypeahead]="search" [resultTemplate]="rt"
            [inputFormatter]="formatter" (selectItem)="selectShip($event)" />
        </div>
        <div class="col-2">
          <div *ngIf="searching">
            <img class="mx-auto" src="assets/images/animations/ship.gif" height="40px">
            <p>Searching</p>
          </div>
          <div *ngIf="searchFailed">
            <img class="mx-auto" src="assets/images/VoyageIcons/128x128/cancel.png" height="32px">
            <p>Search failed</p>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="shipFound">
      <div class="table-responsive">
        <table class="table table-bordered">
          <thead>
            <tr class="bg-ssn text-ssn">
              <th>Flag</th>
              <th>Ship name</th>
              <th>Call sign</th>
              <th>IMO number</th>
              <th>MMSI number</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                <img src="assets/images/Flags/{{shipModel.twoCharCode}}.png" height="20px" />
              </td>
              <td>{{ shipModel.shipName }}</td>
              <td>{{ shipModel.callSign }}</td>
              <td>{{ shipModel.imoNo }}</td>
              <td>{{ shipModel.mmsiNo }}</td>
            </tr>
          </tbody>
        </table>
      </div>
      <button class="btn btn-ssn" (click)="deselectShip()">
        <img src="assets/images/VoyageIcons/128x128/white/cancel.png" height="24px" /> Clear selection</button>
    </div>
  </div>
</div>